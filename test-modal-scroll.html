<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Modal Scroll - ONPE UI</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- IMPORTAR CSS DE LA LIBRERÍA -->
    <link rel="stylesheet" href="./dist/index.css">
    
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #0073cf;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .long-content {
            height: 2000px;
            background: linear-gradient(to bottom, #f0f0f0, #e0e0e0);
            padding: 20px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <div id="portal"></div>

    <script type="text/babel">
        const { useState } = React;

        // Simular el componente Modal (versión simplificada para test)
        const Modal = ({ isOpen, onClose, children, closeButton = false }) => {
            // Solo resetear scroll del modal, NO del body
            React.useEffect(() => {
                if (isOpen) {
                    const modalContentElement = document.querySelector(".onpe-modal-content.onpe-modal-with-background");
                    if (modalContentElement) {
                        modalContentElement.scrollTop = 0;
                    }
                }
            }, [isOpen]);

            const getContainerClass = () => {
                const baseClass = "onpe-modal-container";
                if (isOpen) {
                    return `${baseClass} onpe-modal-open`;
                }
                return `${baseClass} onpe-modal-closed`;
            };

            const getContentClass = () => {
                const baseClass = "onpe-modal-content";
                return `${baseClass} onpe-modal-with-background`;
            };

            return React.createElement('div', { className: getContainerClass() },
                React.createElement('div', { 
                    className: 'onpe-overlay',
                    onClick: onClose,
                    style: { 
                        position: 'fixed', 
                        top: 0, 
                        left: 0, 
                        width: '100%', 
                        height: '100%', 
                        backgroundColor: 'rgba(0, 55, 112, 0.5)',
                        zIndex: 10
                    }
                }),
                React.createElement('div', { className: 'onpe-modal-content-wrapper' },
                    React.createElement('div', { className: getContentClass() }, children),
                    closeButton && React.createElement('button', { 
                        onClick: onClose, 
                        className: 'onpe-modal-close-button',
                        'aria-label': 'Cerrar'
                    }, '×')
                )
            );
        };

        const TestApp = () => {
            const [isOpen, setIsOpen] = useState(false);

            return React.createElement('div', { className: 'test-container' },
                React.createElement('h1', null, 'Test de Modal - Scroll del Body'),
                React.createElement('p', null, 'Este test verifica que el body mantenga su scroll normal cuando el modal está abierto.'),
                
                React.createElement('button', { 
                    className: 'test-button',
                    onClick: () => setIsOpen(true) 
                }, 'Abrir Modal'),
                
                React.createElement('div', { className: 'long-content' },
                    React.createElement('h2', null, 'Contenido Largo del Body'),
                    React.createElement('p', null, 'Este contenido es largo para que puedas hacer scroll en el body.'),
                    React.createElement('p', null, 'Cuando abras el modal, deberías poder seguir haciendo scroll en el body.'),
                    React.createElement('p', null, 'Solo el scroll del modal se resetea, no el del body.'),
                    Array.from({ length: 50 }, (_, i) => 
                        React.createElement('p', { key: i }, `Párrafo ${i + 1}: Contenido del body que permite scroll normal.`)
                    )
                ),
                
                React.createElement(Modal, {
                    isOpen: isOpen,
                    onClose: () => setIsOpen(false),
                    closeButton: true
                }, 
                    React.createElement('div', { style: { padding: '20px' } },
                        React.createElement('h2', null, 'Modal Abierto'),
                        React.createElement('p', null, 'El body mantiene su scroll normal.'),
                        React.createElement('p', null, 'Solo el scroll del modal se resetea.'),
                        
                        // Contenido largo para probar scroll del modal
                        React.createElement('div', { style: { height: '400px', backgroundColor: '#f0f0f0', padding: '20px', margin: '20px 0' } },
                            React.createElement('h3', null, 'Contenido Largo del Modal'),
                            Array.from({ length: 20 }, (_, i) => 
                                React.createElement('p', { key: i }, `Párrafo del modal ${i + 1}: Este contenido permite scroll dentro del modal.`)
                            )
                        ),
                        
                        React.createElement('button', { 
                            className: 'test-button',
                            onClick: () => setIsOpen(false) 
                        }, 'Cerrar Modal')
                    )
                )
            );
        };

        ReactDOM.render(React.createElement(TestApp), document.getElementById('root'));
    </script>
</body>
</html>
